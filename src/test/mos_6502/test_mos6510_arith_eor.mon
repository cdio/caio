#
# MOS6510 CPU test suite.
#
# If a test fails the emulator is halted with exit code 0.
# If all tests succeed the emulator is terminated with exit code 1.
#
########################################
# Clean registers
########################################
a 5000
a9 00
a0 00
a2 00
.
b 5006


########################################
# EOR ($zp, X) - 41
########################################
#
# lda #$50
# sta $0044
# lda #$00
# sta $0045
# lda #$aa
# sta $0050
# ldx #$04
# lda #$ff
# eor ($40, x)
#
a 4000
ea
a9 50
8d 44 00
a9 00
8d 45 00
a9 aa
8d 50 00
a2 04
a9 ff
41 40
02
.
b 4016 ra == #$55
g 5000
g 4000
bd 4016


########################################
# EOR $zp - 45
########################################
#
# lda #$55
# sta $0045
# lda #$ff
# eor $45
#
a 4000
ea
a9 55
8d 45 00
a9 ff
45 45
02
.
b 400a ra == #$aa
g 5000
g 4000
bd 400a


########################################
# EOR immediate - 49
########################################
#
# lda #$ff
# eor #$aa
#
a 4000
ea
a9 ff
49 aa
02
.
b 4005 ra == #$55
g 5000
g 4000


########################################
# EOR $abs - 4D
########################################
#
# lda #$ff
# sta $0045
# lda #$55
# eor $0045
#
a 4000
ea
a9 ff
8d 45 00
a9 55
4d 45 00
02
.
b 400b ra == #$aa
g 5000
g 4000
bd 400b


########################################
# EOR ($zp), Y - 51
########################################
#
# lda #$4c
# sta $0044
# lda #$00
# sta $0045
# lda #$aa
# sta $0050
# ldy #$04
# lda #$ff
# eor ($44), y
#
a 4000
ea
a9 4c
8d 44 00
a9 00
8d 45 00
a9 aa
8d 50 00
a0 04
a9 ff
51 44
02
.
b 4016 ra == #$55
g 5000
g 4000
bd 4016


########################################
# EOR $zp, X - 55
########################################
#
# lda #$ff
# sta $0045
# lda #$aa
# ldx #$05
# eor $40, x
#
a 4000
ea
a9 ff
8d 45 00
a9 aa
a2 05
55 40
02
.
b 400c ra == #$55
g 5000
g 4000
bd 400c


########################################
# EOR $abs, Y - 59
########################################
#
# lda #$55
# sta $0045
# lda #$ff
# ldy #$05
# eor $0040, y
#
a 4000
ea
a9 55
8d 45 00
a9 ff
a0 05
59 40 00
02
.
b 400d ra == #$aa
g 5000
g 4000
bd 400d


########################################
# EOR $abs, X - 5D
########################################
#
# lda #$ff
# sta $0045
# lda #$aa
# ldx #$05
# eor $0040, x
#
a 4000
ea
a9 ff
8d 45 00
a9 aa
a2 05
5d 40 00
02
.
b 400d ra == #$55
g 5000
g 4000
bd 400d


#
# Success
#
quit 1