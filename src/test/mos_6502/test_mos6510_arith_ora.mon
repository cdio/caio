#
# MOS6510 CPU test suite.
#
# If a test fails the emulator is halted with exit code 0.
# If all tests succeed the emulator is terminated with exit code 1.
#
########################################
# Clean registers
########################################
a 5000
a9 00
a0 00
a2 00
.
b 5006


########################################
# ORA ($zp, X) - 01
########################################
#
# lda #$50
# sta $0044
# lda #$00
# sta $0045
# lda #$aa
# sta $0050
# ldx #$04
# lda #$55
# ora ($40, x)
#
a 4000
ea
a9 50
8d 44 00
a9 00
8d 45 00
a9 aa
8d 50 00
a2 04
a9 55
01 40
02
.
b 4016 ra == #$ff
g 5000
g 4000
bd 4016


########################################
# ORA $zp - 05
########################################
#
# lda #$55
# sta $0045
# lda #$aa
# ora $45
#
a 4000
ea
a9 55
8d 45 00
a9 aa
05 45
02
.
b 400a ra == #$ff
g 5000
g 4000
bd 400a


########################################
# ORA immediate - 09
########################################
#
# lda #$55
# ora #$aa
#
a 4000
ea
a9 55
09 aa
02
.
b 4005 ra == #$ff
g 5000
g 4000


########################################
# ORA $abs - 0D
########################################
#
# lda #$aa
# sta $0045
# lda #$55
# ora $0045
#
a 4000
ea
a9 aa
8d 45 00
a9 55
0d 45 00
02
.
b 400b ra == #$ff
g 5000
g 4000
bd 400b


########################################
# ORA ($zp), Y - 11
########################################
#
# lda #$4c
# sta $0044
# lda #$00
# sta $0045
# lda #$aa
# sta $0050
# ldy #$04
# lda #$55
# ora ($44), y
#
a 4000
ea
a9 4c
8d 44 00
a9 00
8d 45 00
a9 aa
8d 50 00
a0 04
a9 55
11 44
02
.
b 4016 ra == #$ff
g 5000
g 4000
bd 4016


########################################
# ORA $zp, X - 15
########################################
#
# lda #$aa
# sta $0045
# lda #$55
# ldx #$05
# ora $40, x
#
a 4000
ea
a9 aa
8d 45 00
a9 55
a2 05
15 40
02
.
b 400c ra == #$ff
g 5000
g 4000
bd 400c


########################################
# ORA $abs, Y - 19
########################################
#
# lda #$aa
# sta $0045
# lda #$55
# ldy #$05
# ora $0040, y
#
a 4000
ea
a9 aa
8d 45 00
a9 55
a0 05
19 40 00
02
.
b 400d ra == #$ff
g 5000
g 4000
bd 400d


########################################
# ORA $abs, X - 1D
########################################
#
# lda #$aa
# sta $0045
# lda #$55
# ldx #$05
# ora $0040, x
#
a 4000
ea
a9 aa
8d 45 00
a9 55
a2 05
1d 40 00
02
.
b 400d ra == #$ff
g 5000
g 4000
bd 400d


#
# Success
#
quit 1